<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Emaulador</title>

<style>
body {
  background: #0b0b0b;
  color: #00ff88;
  font-family: monospace;
  text-align: center;
  margin: 0;
}

canvas {
  border: 4px solid #00ff88;
  image-rendering: pixelated;
  margin-top: 10px;
}

input {
  background: #00ff88;
  color: #000;
  border: none;
  padding: 8px;
  margin: 6px;
  font-weight: bold;
}

.controls {
  display: grid;
  grid-template-columns: repeat(4, 60px);
  gap: 8px;
  justify-content: center;
  margin: 15px 0;
}

.btn {
  background: #003322;
  color: #00ff88;
  border: 2px solid #00ff88;
  padding: 15px 0;
  font-size: 18px;
  user-select: none;
  touch-action: none;
}
</style>
</head>
<body>

<h1>üïπÔ∏è EMAULADOR</h1>
<p>CHIP-8 ‚Ä¢ BIN / CH8 ‚Ä¢ Touch</p>

<input type="file" id="romLoader" accept=".bin,.ch8">
<p id="romName">Nenhuma ROM carregada</p>

<canvas id="screen"></canvas>

<!-- CONTROLES NA TELA -->
<div class="controls">
  <div class="btn" data-key="1">1</div>
  <div class="btn" data-key="2">2</div>
  <div class="btn" data-key="3">3</div>
  <div class="btn" data-key="C">C</div>

  <div class="btn" data-key="4">4</div>
  <div class="btn" data-key="5">5</div>
  <div class="btn" data-key="6">6</div>
  <div class="btn" data-key="D">D</div>

  <div class="btn" data-key="7">7</div>
  <div class="btn" data-key="8">8</div>
  <div class="btn" data-key="9">9</div>
  <div class="btn" data-key="E">E</div>

  <div class="btn" data-key="A">A</div>
  <div class="btn" data-key="0">0</div>
  <div class="btn" data-key="B">B</div>
  <div class="btn" data-key="F">F</div>
</div>

<script src="script.js"></script>

<script>
const romName = document.getElementById("romName");

document.getElementById("romLoader").addEventListener("change", e => {
  const file = e.target.files[0];
  if (!file) return;

  romName.textContent = "ROM: " + file.name;

  const reader = new FileReader();
  reader.onload = () => loadROM(reader.result);
  reader.readAsArrayBuffer(file);
});

/* CONTROLES TOUCH */
document.querySelectorAll(".btn").forEach(btn => {
  const key = parseInt(btn.dataset.key, 16);

  btn.addEventListener("touchstart", () => keys[key] = 1);
  btn.addEventListener("touchend", () => keys[key] = 0);
});
</script>

</body>
</html>